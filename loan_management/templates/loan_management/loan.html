{% extends 'loan_management/base.html' %}
{% block title %}Loan detail{% endblock %}
{% block body %}
    <h2 class="text-3xl font-bold mt-10">Loan Details</h2>
    <p>
        <strong>Loan ID:</strong> {{ loan.id }}
    </p>
    <p>
        <strong>Member:</strong> {{ loan.member.name }}
    </p>
    <p>
        <strong>Amount:</strong> {{ loan.amount }}
    </p>
    <p>
        <strong>Disbursed Amount:</strong> {{ loan.disbursed_amount }}
    </p>
    <p>
        <strong>Outstanding Principal:</strong> {{ loan.outstanding_principal }}
    </p>
    <p>
        <strong>Interest Rate:</strong> {{ loan.interest_rate }}%
    </p>
    <p>
        <strong>Term:</strong> {{ loan.term }} months
    </p>
    <p>
        <strong>Status:</strong> {{ loan.get_status_display }}
    </p>
    <p>
        <strong>Payment Frequency:</strong> {{ loan.get_payment_frequency_display }}
    </p>
    <p>
        <strong>Purpose:</strong> {{ loan.purpose }}
    </p>
    <p>
        <strong>Started At:</strong> {{ loan.started_at }}
    </p>
    <p>
        <strong>End At:</strong> {{ loan.end_at }}
    </p>
    <p>
        <strong>Disbursed At:</strong> {{ loan.disbursed_at }}
    </p>
    <p>
        <strong>Minimum Payment:</strong> {{ loan.minimum_payment }}
    </p>
    <!-- payoff amount -->
    <h2 class="text-3xl font-bold mt-10">Payoff amount</h2>
    <p>
        <strong>Payoff Interest</strong> {{ payoff_amount.0 }}
    </p>
    <p>
        <strong>Payoff Principal</strong> {{ payoff_amount.1 }}
    </p>
    <p>
        <strong>Total</strong> {{ payoff_amount.2 }}
    </p>
    <!-- payments made -->
    <h2 class="text-3xl font-bold mt-10">Interest Payments made</h2>
    <h2 class="text-2xl">Principal Payments made</h2>
    <h2 class="text-2xl">Repayment schedule</h2>
    <!-- repayment schedule -->
    <h2 class="text-3xl font-bold mt-10">Repayment schedule</h2>
    {% for payment in repayment_schedule %}
        <p>
            {{ payment.payment_number }}) payment interest: {{ payment.interest }} payment principal: {{ payment.principal }} payment total: {{ payment.total }} {{ payment.running_interest }} {{ payment.running_principal }} {{ payment.running_total }} {{ payment.running_outstanding_principal }}
        </p>
    {% endfor %}
    <!-- form for payment that supports custom amount input (maybe create two checkboxes with one saying custom if that is selected user can input custom amount and the amount that is generated by calculate next payment method -->
{% endblock %}
